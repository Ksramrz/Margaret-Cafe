# پنل مدیریت و سیستم پرداخت کافه مارگارت

## پنل مدیریت

### دسترسی به پنل مدیریت
- آدرس: `http://localhost:3000/admin`
- شامل بخش‌های:
  - داشبورد (آمار کلی)
  - مدیریت محصولات
  - مدیریت سفارشات
  - مدیریت مشتریان
  - مدیریت دوره‌ها
  - تنظیمات سیستم

### ویژگی‌های پنل مدیریت
- ✅ رابط کاربری فارسی
- ✅ آمار فروش و سفارشات
- ✅ مدیریت محصولات
- ✅ تنظیمات پرداخت زرین‌پال
- ✅ طراحی ریسپانسیو

## سیستم پرداخت زرین‌پال

### تنظیمات مورد نیاز

1. **متغیرهای محیطی** (در فایل `.env.local`):
```env
ZARINPAL_MERCHANT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
ZARINPAL_SANDBOX=true
NEXT_PUBLIC_BASE_URL=http://localhost:3000
```

2. **دریافت مرچنت آیدی از زرین‌پال**:
   - ثبت‌نام در سایت زرین‌پال
   - دریافت مرچنت آیدی
   - فعال‌سازی درگاه پرداخت

### نحوه استفاده

1. **کامپوننت پرداخت**:
```tsx
import ZarinpalPayment from '@/components/ZarinpalPayment';

<ZarinpalPayment
  amount={250000} // مبلغ به تومان
  description="خرید قهوه ترک اصیل"
  onSuccess={(transactionId) => console.log('Success:', transactionId)}
  onError={(error) => console.log('Error:', error)}
/>
```

2. **API Endpoints**:
   - `POST /api/payment/zarinpal` - ایجاد درخواست پرداخت
   - `POST /api/payment/verify` - تایید پرداخت
   - `GET /payment/callback` - صفحه بازگشت از پرداخت

### مراحل پرداخت

1. کاربر روی دکمه پرداخت کلیک می‌کند
2. درخواست به API ارسال می‌شود
3. کاربر به صفحه پرداخت زرین‌پال هدایت می‌شود
4. پس از پرداخت، به صفحه callback بازمی‌گردد
5. پرداخت تایید می‌شود و سفارش ثبت می‌شود

### تست پرداخت

- در حالت Sandbox، از کارت‌های تست استفاده کنید
- کدهای تست زرین‌پال:
  - موفق: `123456789012345678901234`
  - ناموفق: `123456789012345678901235`

## نکات مهم

1. **امنیت**: مرچنت آیدی را در متغیرهای محیطی نگهداری کنید
2. **تست**: همیشه ابتدا در حالت Sandbox تست کنید
3. **لاگ**: تمام تراکنش‌ها را لاگ کنید
4. **بک‌آپ**: اطلاعات سفارشات را در دیتابیس ذخیره کنید

## پشتیبانی

برای راهنمایی بیشتر با تیم توسعه تماس بگیرید.

